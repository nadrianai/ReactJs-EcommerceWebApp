"use strict";(self.webpackChunkcleint=self.webpackChunkcleint||[]).push([[299],{1249:function(n,t,e){e.r(t),e.d(t,{default:function(){return j}});var r=e(7166),o=e(3032),a=e(8489),u=e(678),i=e(2791),c=e(6142),l=e(9085),s=e(7309),f=e(8428),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},m=e(4963),p=function(n,t){return i.createElement(m.Z,(0,f.Z)((0,f.Z)({},n),{},{ref:t,icon:d}))};p.displayName="MailOutlined";var h=i.forwardRef(p),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1c-66.5-62-153.2-100-256.6-100-149.9 0-279.6 86-342.7 211.4-26 51.8-40.8 110.4-40.8 172.4S151 632.8 177 684.6C240.1 810 369.8 896 519.7 896c103.6 0 190.4-34.4 253.8-93 72.5-66.8 114.4-165.2 114.4-282.1 0-27.2-2.4-53.3-6.9-78.5z"}}]},name:"google",theme:"outlined"},y=function(n,t){return i.createElement(m.Z,(0,f.Z)((0,f.Z)({},n),{},{ref:t,icon:v}))};y.displayName="GoogleOutlined";var g=i.forwardRef(y),b=e(9434),Z=e(7736),w=e(2426),x=e(6958),k=e(184),j=function(){var n=(0,i.useState)(""),t=(0,u.Z)(n,2),e=t[0],f=t[1],d=(0,i.useState)(""),m=(0,u.Z)(d,2),p=m[0],v=m[1],y=(0,i.useState)(""),j=(0,u.Z)(y,2),S=j[0],E=j[1],A=(0,b.I0)(),I=(0,Z.k6)(),N=(0,b.v9)((function(n){return(0,a.Z)({},n)})).user,C=function(n){var t=I.location.state;t?I.push(t.from):"subscriber"===n.data.role?I.push("/user/history"):I.push("/admin/dashboard")};(0,i.useEffect)((function(){}),[N,I]);var _=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),E(!0),n.next=4,c.I.signInWithEmailAndPassword(e,p).then((function(n){n.user.getIdTokenResult().then((function(n){var t=n.token;(0,x.XB)(t).then((function(n){console.log(n.data._id),C(n),A({type:"LOGGED_IN_USER",payload:{email:n.data.email,name:n.data.name,token:t,role:n.data.role,_id:n.data._id}})}))}))})).catch((function(n){E(!1),console.log(n),l.Am.error(n.message)}));case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),L=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c.I.signInWithPopup(c.q).then(function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t){var e,o;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.user,n.next=3,e.getIdTokenResult();case 3:o=n.sent,(0,x.XB)(o.token).then((function(n){A({type:"LOGGED_IN_USER",payload:{_id:n.data._id,email:n.data.email,name:n.data.name,token:o.token,role:n.data.role}})}));case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).catch((function(n){E(!1),console.log(n),l.Am.error("User or password invalid!")}));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,k.jsx)("div",{className:"container p-5",children:(0,k.jsx)("div",{className:"row",children:(0,k.jsxs)("div",{className:"col-md-6 offset-md-3",children:[S?(0,k.jsx)("h4",{children:" Loading..."}):(0,k.jsx)("h4",{children:" Login "}),(0,k.jsxs)("form",{onSubmit:_,children:[(0,k.jsx)("input",{type:"email",className:"form-control mb-3",value:e,onChange:function(n){return f(n.target.value)},placeholder:"Your email"}),(0,k.jsx)("input",{type:"password",className:"form-control mb-3",value:p,onChange:function(n){return v(n.target.value)},placeholder:"Your password"}),(0,k.jsx)(s.Z,{onClick:_,type:"primary",className:"mb-3",block:!0,shape:"round",icon:(0,k.jsx)(h,{}),children:"Login with Email/Password "})]}),(0,k.jsx)(s.Z,{onClick:L,type:"danger",className:"mb-3 ",block:!0,shape:"round",icon:(0,k.jsx)(g,{}),children:"Login with Google"}),(0,k.jsx)(w.rU,{to:"/forgot/password",className:"text-danger float-right ",children:(0,k.jsx)("u",{children:"Forgot password?"})})]})})})}},1113:function(n,t,e){e.d(t,{Tm:function(){return a},l$:function(){return o}});var r=e(2791),o=r.isValidElement;function a(n,t){return function(n,t,e){return o(n)?r.cloneElement(n,"function"===typeof e?e(n.props||{}):e):t}(n,n,t)}},5072:function(n,t,e){e.d(t,{b:function(){return r}});var r=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return t}},1815:function(n,t,e){e.d(t,{q:function(){return a}});var r=e(2791),o=r.createContext(void 0),a=function(n){var t=n.children,e=n.size;return r.createElement(o.Consumer,null,(function(n){return r.createElement(o.Provider,{value:e||n},t)}))};t.Z=o},1818:function(n,t,e){e.d(t,{Z:function(){return o}});var r=e(141);function o(n,t){var e=(0,r.Z)({},n);return Array.isArray(t)&&t.forEach((function(n){delete e[n]})),e}},1050:function(n,t,e){function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}e.d(t,{Z:function(){return r}})},7449:function(n,t,e){e.d(t,{Z:function(){return o}});var r=e(4394);function o(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,a=[],u=!0,i=!1;try{for(e=e.call(n);!(u=(r=e.next()).done)&&(a.push(r.value),!t||a.length!==t);u=!0);}catch(c){i=!0,o=c}finally{try{u||null==e.return||e.return()}finally{if(i)throw o}}return a}}(n,t)||(0,r.Z)(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},8442:function(n,t,e){function r(n){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}e.d(t,{Z:function(){return r}})},4394:function(n,t,e){e.d(t,{Z:function(){return o}});var r=e(1050);function o(n,t){if(n){if("string"===typeof n)return(0,r.Z)(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?(0,r.Z)(n,t):void 0}}}}]);
//# sourceMappingURL=299.13c38da4.chunk.js.map